(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),s=(a(17),a(1)),l=a(2),c=a(4),m=a(3),h=a(5),p=(a(18),a(19),function(e){var t=e.header;return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,t)))}),u=a(6),d=a(8),f=(a(20),function(e){var t=e.header,a=e.children;return r.a.createElement("div",{className:"form-section"},r.a.createElement("h2",{className:"form-section__header"},t),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-section__body"},a))}),v=(a(21),a(7)),g=a.n(v),E={categories:"http://www.mocky.io/v2/5bcdd3942f00002c00c855ba",coordinators:"http://www.mocky.io/v2/5bcdd7992f00006300c855d5",titleValidation:"http://www.mocky.io/v2/5bcdd8732f00007300c855da"};var b=function(e){return e.map(function(e){return{name:[e.name,e.lastname].join(" "),id:e.id}})};var y={FREE:"FREE",PAID:"PAID"},C={AM:"AM",PM:"PM"},N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){a.props.novalidate||a.setErrorMessage(a.input.validity)},a.handleChange=function(e){a.props.novalidate||a.setErrorMessage(a.input.validity),a.props.customValidation&&a.props.customValidation(e).then(function(e){a.input.validity.custom=e,a.setErrorMessage(a.input.validity),a.setState({showErrors:e})}),a.props.onChange(e)},a.setErrorMessage=function(e){var t=[];for(var n in e)e[n]&&t.push(n);a.setState({errorMessage:a.props.errorMessages[t[0]]})},a.getInputClasses=function(){return a.state.showErrors?"form-control has-errors":"form-control"},a.renderHint=function(){return a.props.hint?r.a.createElement("div",{className:"form-control__hint"},a.props.hint):null},a.renderError=function(){return a.state.errorMessage?r.a.createElement("div",{className:"form-control__error"},a.state.errorMessage):null},a.state={errorMessage:"",showErrors:!1},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getInputClasses()},r.a.createElement("input",{ref:function(t){return e.input=t},id:this.props.id,name:this.props.name,value:this.props.value,onChange:this.handleChange,type:this.props.type,placeholder:this.props.placeholder,required:this.props.required}),this.renderHint(),this.renderError())}}]),t}(n.Component),w={title:{valueMissing:"Title cannot be empty",custom:"Title already in use"},description:{valueMissing:"Description cannot be empty"},email:{valueMissing:"Email cannot be empty",typeMismatch:"Wrong email address"},date:{valueMissing:"Date cannot be empty"},time:{valueMissing:"Time cannot be empty"}},O=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getInputClasses()},r.a.createElement("textarea",{ref:function(t){return e.input=t},rows:this.props.rows,maxLength:this.props.maxLength,id:this.props.id,name:this.props.name,value:this.props.value,onChange:this.handleChange,type:this.props.type,placeholder:this.props.placeholder,required:this.props.required}),r.a.createElement("div",{className:"form-control__hint"},"Max length ",this.props.maxLength," characters",r.a.createElement("span",{className:"f-rigth"},this.props.value.length,"/",this.props.maxLength)),this.renderError())}}]),t}(N),j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).getInputClasses=function(){var e=["form-control form-control-inline"];return a.state.showErrors&&e.push("has-errors"),a.props.className&&e.push(a.props.className),e.join(" ")},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getInputClasses()},r.a.createElement("input",{ref:function(t){return e.input=t},id:this.props.id,name:this.props.name,min:this.props.min,value:this.props.value,onChange:this.handleChange,type:this.props.type,placeholder:this.props.placeholder,required:this.props.required}),r.a.createElement("span",{className:"form-control__description"},this.props.description),this.renderHint(),this.renderError())}}]),t}(N),M=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).renderHint=function(){return a.props.hint?r.a.createElement("div",{className:"form-control__hint"},a.props.hint):null},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-control"},r.a.createElement("select",{value:this.props.value,onChange:this.props.onChange,name:this.props.name,id:this.props.id},this.props.placeholder?r.a.createElement("option",{value:""},this.props.placeholder):null,this.props.options.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),this.renderHint())}}]),t}(n.Component),I=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-control form-control-inline"},r.a.createElement("input",{type:this.props.type,name:this.props.name,onChange:this.props.onChange,checked:this.props.checked,value:this.props.value}),r.a.createElement("span",null,this.props.label))}}]),t}(n.Component),_=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).componentDidMount=function(){fetch(E.categories).then(function(e){return e.json()}).then(function(t){e.setState({categories:t})}),fetch(E.coordinators).then(function(e){return e.json()}).then(function(e){return b(e)}).then(function(t){return e.selectLogedInCoordinator(t)}).then(function(t){e.setState({coordinators:t})});var t=3;e.setState(function(e){return{logedInUserId:t,form:Object(d.a)({},e.form,{responsible:t.toString()})}})},e.handleSubmit=function(t){e.form.current.reportValidity()&&console.log("Output: ",function(e){var t=e.date+" "+e.time+" "+e.meridiem,a=g()(t).format("YYYY-MM-DDTHH:mm");return{title:e.title,description:e.description,category_id:Number(e.category),paid_event:e.paid_event===y.FREE?0:1,event_fee:Number(e.fee),reward:Number(e.reward),date:a,duration:3600*Number(e.duration),coordinator:{id:e.responsible,email:e.email}}}(e.state.form)),e.setState({wasValidated:!0}),t.preventDefault()},e.validateTitle=function(e){return t=e.target.value,fetch(E.titleValidation).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return e.title})}).then(function(e){return e.includes(t)});var t},e.handleInputChange=function(t){var a=t.target.value,n=t.target.name;e.setState(function(e){return{form:Object(d.a)({},e.form,Object(u.a)({},n,a))}})},e.state={form:{title:"",description:"",category:"",paid_event:y.FREE,fee:"",reward:"",responsible:"",email:"",date:"",time:"",meridiem:C.AM,duration:""},categories:[],coordinators:[],logedInUserId:null,wasValidated:!1},e.formSetup={description:{maxLength:140},fee:{min:0},reward:{min:0},date:{min:g()().format("YYYY-MM-DD")},duration:{min:0}},e.form=r.a.createRef(),e}return Object(h.a)(t,e),Object(l.a)(t,[{key:"selectLogedInCoordinator",value:function(e){var t=this;return e.map(function(e){return e.id===t.state.logedInUserId&&(e.name="Me - "+e.name),e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"event-form"},r.a.createElement("form",{ref:this.form,onSubmit:this.handleSubmit,noValidate:!0,className:this.state.wasValidated?"was-validated":""},r.a.createElement(f,{header:"About"},r.a.createElement("div",{className:"form-group required"},r.a.createElement("label",{htmlFor:"title"},"TITLE"),r.a.createElement(N,{id:"title",name:"title",value:this.state.form.title,onChange:this.handleInputChange,type:"text",placeholder:"Make it short and clear",customValidation:this.validateTitle,errorMessages:w.title,required:!0})),r.a.createElement("div",{className:"form-group required"},r.a.createElement("label",{htmlFor:"description"},"DESCRIPTION"),r.a.createElement(O,{rows:"4",maxLength:this.formSetup.description.maxLength,id:"description",name:"description",hint:"Max length {this.formSetup.description.maxLength} characters",type:"text",value:this.state.form.description,placeholder:"Write about your event, be creative",errorMessages:w.description,onChange:this.handleInputChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"category"},"CATEGORY"),r.a.createElement(M,{value:this.state.form.category,onChange:this.handleInputChange,name:"category",id:"category",options:this.state.categories,placeholder:"Select category",hint:"Describes topis and people who should be intrested in this event"})),r.a.createElement("div",{className:"form-group form-group-inline"},r.a.createElement("label",null,"PAYMENT"),r.a.createElement(I,{type:"radio",name:"paid_event",onChange:this.handleInputChange,checked:this.state.form.paid_event===y.FREE,value:y.FREE,label:"Free event"}),r.a.createElement(I,{type:"radio",name:"paid_event",onChange:this.handleInputChange,checked:this.state.form.paid_event===y.PAID,value:y.PAID,label:"Paid event"}),this.state.form.paid_event===y.PAID?r.a.createElement(j,{type:"number",className:"fee-control short",name:"fee",value:this.state.form.fee,onChange:this.handleInputChange,min:this.formSetup.fee.min,placeholder:"Fee",description:"$",novalidate:!0}):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"reward"},"REWARD"),r.a.createElement(j,{type:"number",className:"short",id:"reward",name:"reward",value:this.state.form.reward,onChange:this.handleInputChange,min:this.formSetup.reward.min,placeholder:"Number",description:"reward points for attendance",novalidate:!0}))),r.a.createElement(f,{header:"Coordinator"},r.a.createElement("div",{className:"form-group required"},r.a.createElement("label",{htmlFor:"responsible"},"RESPONSIBLE"),r.a.createElement(M,{value:this.state.form.responsible,onChange:this.handleInputChange,name:"responsible",id:"responsible",options:this.state.coordinators})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"EMAIL"),r.a.createElement(N,{id:"email",name:"email",value:this.state.form.email,onChange:this.handleInputChange,type:"email",placeholder:"Email",errorMessages:w.email}))),r.a.createElement(f,{header:"When"},r.a.createElement("div",{className:"form-group required form-group-inline"},r.a.createElement("label",null,"STARTS ON"),r.a.createElement(j,{id:"date",name:"date",onChange:this.handleInputChange,type:"date",className:"medium",min:this.formSetup.date.min,placeholder:"dd/mm/yyyy",description:"at",errorMessages:w.date,required:!0}),r.a.createElement(j,{id:"time",name:"time",onChange:this.handleInputChange,type:"time",className:"time-control",placeholder:"--:--",errorMessages:w.time,required:!0}),r.a.createElement(I,{type:"radio",onChange:this.handleInputChange,checked:this.state.form.meridiem===C.AM,name:"meridiem",value:C.AM,label:"AM"}),r.a.createElement(I,{type:"radio",onChange:this.handleInputChange,checked:this.state.form.meridiem===C.PM,name:"meridiem",value:C.PM,label:"PM"})),r.a.createElement("div",{className:"form-group form-group-inline"},r.a.createElement("label",{htmlFor:"duration"},"DURATION"),r.a.createElement(j,{id:"duration",name:"duration",onChange:this.handleInputChange,type:"number",value:this.state.form.duration,className:"short",min:this.formSetup.reward.min,placeholder:"Number",description:"hours",novalidate:!0}))),r.a.createElement("button",{type:"submit",className:"btn-secondary event-form__submit-btn"},"Publish Event")))}}]),t}(n.Component),S=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(p,{header:"New event"}),r.a.createElement("div",{className:"app__body"},r.a.createElement("div",{className:"container"},r.a.createElement(_,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.0ade93e8.chunk.js.map