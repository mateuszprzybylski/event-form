(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(34)},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),o=a.n(i),s=(a(26),a(3)),l=a(4),c=a(6),m=a(5),u=a(7),p=(a(27),a(28),function(e){var t=e.header;return r.a.createElement("header",{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,t)))}),h=a(10),d=a(13),f=(a(29),"section-success"),v="section-warning",g=function(e){var t=e.header,a=e.children,n=e.type;return r.a.createElement("div",{className:"section "+n},r.a.createElement("h2",{className:"section__header"},t),r.a.createElement("hr",null),r.a.createElement("div",{className:"section__body"},a))},E=(a(30),a(11)),b=a.n(E),y={categories:"https://www.mocky.io/v2/5bcdd3942f00002c00c855ba",coordinators:"https://www.mocky.io/v2/5bcdd7992f00006300c855d5",titleValidation:"https://www.mocky.io/v2/5bcdd8732f00007300c855da"};function C(e){var t=e.date+" "+e.time+" "+e.meridiem;return b()(t,"YYYY-MM-DD HH:mm am").format("YYYY-MM-DDTHH:mm")}var N=function(e){return e.map(function(e){return{name:[e.name,e.lastname].join(" "),id:e.id}})};var w={FREE:"FREE",PAID:"PAID"},M={AM:"AM",PM:"PM"},O=a(18),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).componentDidMount=function(){a.props.novalidate||a.setErrorMessage(a.input.validity)},a.handleChange=function(e){a.props.novalidate||a.setErrorMessage(a.input.validity),a.props.customValidation&&a.customValidation(e.target.value),a.props.onChange(e)},a.customValidation=Object(O.debounce)(function(e){a.props.customValidation(e).then(function(e){a.input.setCustomValidity(e?" ":""),a.setErrorMessage(a.input.validity),a.setState({showErrors:e})})},1e3),a.setErrorMessage=function(e){var t=[];for(var n in e)e[n]&&t.push(n);a.setState({errorMessage:a.props.errorMessages[t[0]]})},a.getInputClasses=function(){var e=[a.defaultInputClass];return a.state.showErrors&&e.push("has-errors"),a.props.className&&e.push(a.props.className),e.join(" ")},a.renderHint=function(){return a.props.hint?r.a.createElement("div",{className:"form-control__hint"},a.props.hint):null},a.renderError=function(){return a.state.errorMessage?r.a.createElement("div",{className:"form-control__error"},a.state.errorMessage):null},a.state={errorMessage:"",showErrors:!1},a.defaultInputClass="form-control",a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getInputClasses()},r.a.createElement("input",{ref:function(t){return e.input=t},id:this.props.id,name:this.props.name,value:this.props.value,onChange:this.handleChange,type:this.props.type,placeholder:this.props.placeholder,required:this.props.required}),this.renderHint(),this.renderError())}}]),t}(n.Component),I={title:{valueMissing:"Title cannot be empty",customError:"Title already in use"},description:{valueMissing:"Description cannot be empty"},email:{valueMissing:"Email cannot be empty",typeMismatch:"Wrong email address"},date:{valueMissing:"Date cannot be empty"},time:{valueMissing:"Time cannot be empty",patternMismatch:"Time should have 12 hours format (HH:mm)"}},_=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getInputClasses()},r.a.createElement("textarea",{ref:function(t){return e.input=t},rows:this.props.rows,maxLength:this.props.maxLength,id:this.props.id,name:this.props.name,value:this.props.value,onChange:this.handleChange,type:this.props.type,placeholder:this.props.placeholder,required:this.props.required}),r.a.createElement("div",{className:"form-control__hint"},"Max length ",this.props.maxLength," characters",r.a.createElement("span",{className:"f-rigth"},this.props.value.length,"/",this.props.maxLength)),this.renderError())}}]),t}(j),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).defaultInputClass="form-control form-control-inline",a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.getInputClasses()},r.a.createElement("input",{ref:function(t){return e.input=t},pattern:this.props.pattern,id:this.props.id,maxLength:this.props.max,name:this.props.name,min:this.props.min,value:this.props.value,onChange:this.handleChange,type:this.props.type,placeholder:this.props.placeholder,required:this.props.required}),r.a.createElement("span",{className:"form-control__description"},this.props.description),this.renderHint(),this.renderError())}}]),t}(j),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).renderHint=function(){return a.props.hint?r.a.createElement("div",{className:"form-control__hint"},a.props.hint):null},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-control"},r.a.createElement("select",{value:this.props.value,onChange:this.props.onChange,name:this.props.name,id:this.props.id},this.props.placeholder?r.a.createElement("option",{value:""},this.props.placeholder):null,this.props.options.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),this.renderHint())}}]),t}(n.Component),x=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"form-control form-control-inline"},r.a.createElement("input",{type:this.props.type,name:this.props.name,onChange:this.props.onChange,checked:this.props.checked,value:this.props.value}),r.a.createElement("span",null,this.props.label))}}]),t}(n.Component),D=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).componentDidMount=function(){fetch(y.categories).then(function(e){return e.json()}).then(function(t){e.setState({categories:t})}),fetch(y.coordinators).then(function(e){return e.json()}).then(function(e){return N(e)}).then(function(t){return e.selectLogedInCoordinator(t)}).then(function(t){e.setState({coordinators:t})});var t=3;e.setState(function(e){return{logedInUserId:t,form:Object(d.a)({},e.form,{responsible:t.toString()})}})},e.handleSubmit=function(t){var a;e.form.current.reportValidity()&&(e.props.history.push("/success"),console.log("Output: ",{title:(a=e.state.form).title,description:a.description,category_id:Number(a.category),paid_event:a.paid_event===w.FREE?0:1,event_fee:Number(a.fee),reward:Number(a.reward),date:C(a),duration:3600*Number(a.duration),coordinator:{id:a.responsible,email:a.email}})),e.setState({wasValidated:!0}),t.preventDefault()},e.validateTitle=function(e){return function(e){return fetch(y.titleValidation).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return e.title})}).then(function(t){return t.includes(e)})}(e)},e.handleInputChange=function(t){var a=t.target.value,n=t.target.name;e.setState(function(e){return{form:Object(d.a)({},e.form,Object(h.a)({},n,a))}})},e.state={form:{title:"",description:"",category:"",paid_event:w.FREE,fee:"",reward:"",responsible:"",email:"",date:"",time:"",meridiem:M.AM,duration:""},categories:[],coordinators:[],logedInUserId:null,wasValidated:!1},e.formSetup={description:{maxLength:140},fee:{min:0},reward:{min:0},date:{min:b()().format("YYYY-MM-DD")},duration:{min:0}},e.form=r.a.createRef(),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"selectLogedInCoordinator",value:function(e){var t=this;return e.map(function(e){return e.id===t.state.logedInUserId&&(e.name="Me - "+e.name),e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"event-form"},r.a.createElement("form",{ref:this.form,onSubmit:this.handleSubmit,noValidate:!0,className:this.state.wasValidated?"was-validated":""},r.a.createElement(g,{header:"About"},r.a.createElement("div",{className:"form-group required"},r.a.createElement("label",{htmlFor:"title"},"TITLE"),r.a.createElement(j,{id:"title",name:"title",value:this.state.form.title,onChange:this.handleInputChange,type:"text",placeholder:"Make it short and clear",customValidation:this.validateTitle,errorMessages:I.title,required:!0})),r.a.createElement("div",{className:"form-group required"},r.a.createElement("label",{htmlFor:"description"},"DESCRIPTION"),r.a.createElement(_,{rows:"4",maxLength:this.formSetup.description.maxLength,id:"description",name:"description",hint:"Max length {this.formSetup.description.maxLength} characters",type:"text",value:this.state.form.description,placeholder:"Write about your event, be creative",errorMessages:I.description,onChange:this.handleInputChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"category"},"CATEGORY"),r.a.createElement(k,{value:this.state.form.category,onChange:this.handleInputChange,name:"category",id:"category",options:this.state.categories,placeholder:"Select category",hint:"Describes topis and people who should be intrested in this event"})),r.a.createElement("div",{className:"form-group form-group-inline"},r.a.createElement("label",null,"PAYMENT"),r.a.createElement(x,{type:"radio",name:"paid_event",onChange:this.handleInputChange,checked:this.state.form.paid_event===w.FREE,value:w.FREE,label:"Free event"}),r.a.createElement(x,{type:"radio",name:"paid_event",onChange:this.handleInputChange,checked:this.state.form.paid_event===w.PAID,value:w.PAID,label:"Paid event"}),this.state.form.paid_event===w.PAID?r.a.createElement(S,{type:"number",className:"fee-control short",name:"fee",value:this.state.form.fee,onChange:this.handleInputChange,min:this.formSetup.fee.min,placeholder:"Fee",description:"$",novalidate:!0}):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"reward"},"REWARD"),r.a.createElement(S,{type:"number",className:"short",id:"reward",name:"reward",value:this.state.form.reward,onChange:this.handleInputChange,min:this.formSetup.reward.min,placeholder:"Number",description:"reward points for attendance",novalidate:!0}))),r.a.createElement(g,{header:"Coordinator"},r.a.createElement("div",{className:"form-group required"},r.a.createElement("label",{htmlFor:"responsible"},"RESPONSIBLE"),r.a.createElement(k,{value:this.state.form.responsible,onChange:this.handleInputChange,name:"responsible",id:"responsible",options:this.state.coordinators})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"EMAIL"),r.a.createElement(j,{id:"email",name:"email",value:this.state.form.email,onChange:this.handleInputChange,type:"email",placeholder:"Email",errorMessages:I.email}))),r.a.createElement(g,{header:"When"},r.a.createElement("div",{className:"form-group required form-group-inline"},r.a.createElement("label",null,"STARTS ON"),r.a.createElement(S,{id:"date",name:"date",onChange:this.handleInputChange,type:"date",className:"medium",min:this.formSetup.date.min,placeholder:"dd/mm/yyyy",description:"at",errorMessages:I.date,required:!0}),r.a.createElement(S,{id:"time",name:"time",onChange:this.handleInputChange,type:"text",max:"5",pattern:"^(1[0-2]|0?[1-9]):[0-5][0-9]$",className:"time-control short",placeholder:"--:--",errorMessages:I.time,required:!0}),r.a.createElement(x,{type:"radio",onChange:this.handleInputChange,checked:this.state.form.meridiem===M.AM,name:"meridiem",value:M.AM,label:"AM"}),r.a.createElement(x,{type:"radio",onChange:this.handleInputChange,checked:this.state.form.meridiem===M.PM,name:"meridiem",value:M.PM,label:"PM"})),r.a.createElement("div",{className:"form-group form-group-inline"},r.a.createElement("label",{htmlFor:"duration"},"DURATION"),r.a.createElement(S,{id:"duration",name:"duration",onChange:this.handleInputChange,type:"number",value:this.state.form.duration,className:"short",min:this.formSetup.reward.min,placeholder:"Number",description:"hours",novalidate:!0}))),r.a.createElement("button",{type:"submit",className:"btn-secondary event-form__submit-btn"},"Publish Event")))}}]),t}(n.Component),A=a(36),P=a(37),F=function(){return r.a.createElement("div",null,r.a.createElement(g,{header:"Success",type:f},"Event has been created"))},T=function(){return r.a.createElement("div",null,r.a.createElement(g,{header:"404",type:v},"Page not found"))},q=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(p,{header:"New event"}),r.a.createElement("div",{className:"app__body"},r.a.createElement("div",{className:"container"},r.a.createElement(A.a,null,r.a.createElement(P.a,{exact:!0,path:"/",component:D}),r.a.createElement(P.a,{exact:!0,path:"/success",component:F}),r.a.createElement(P.a,{component:T})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=a(35);o.a.render(r.a.createElement(L.a,null,r.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.87d52772.chunk.js.map